
<script src="{{ 'quiz.js' | asset_url }}"></script>
{{ 'quiz.css' | asset_url | stylesheet_tag }}    


<div class="emailpopup-section">
  <div class="emailpopup-sectioninner">

    <div class="mainheading-popup">
      <h2>Before we show your resultsâ€¦</h2>
      <img class="email-closebtn" src="https://cdn.shopify.com/s/files/1/0576/2167/6166/files/Frame_3532_2.png?v=1757509273">
    </div>

      <form id="quizContactForm">
        <input type="hidden" name="form_type" value="contact">
        <input type="hidden" name="utf8" value="âœ“">
        <input type="hidden" name="contact[quiz_result]" id="quiz_result">

      <div class="emailbox-section">

        <label>Your Name
          <input type="text" name="contact[name]" id="quiz_name">
        </label>

        <label>Phone Number
          <input type="tel" name="contact[phone]" id="quiz_phone">
        </label>

        <label>Email
          <input type="email" name="contact[email]" id="quiz_email">
        </label>

        <label>Age
          <input type="number" name="contact[age]" id="quiz_age">
        </label>

        <label>Address
          <input type="text" name="contact[address]" id="quiz_address">
        </label>

        <label>Social Media Page Link
          <input type="url" name="contact[social_link]" id="quiz_social">
        </label>

        <div class="checkbox-condition">
          <label>
            <input type="checkbox" required>
            Keep me in the loop with news and promotions via email.
          </label>
        </div>

        <button type="button" id="getResults">Get my Results! âœ¨</button>

        <p class="form-success-msg" style="display:none;color:#1eb556;margin-top:12px;">
          âœ… Details submitted successfully!
        </p>

      </div>
    </form>

  </div>
</div>



<div class="quizmain-section">
  <div class="quizmain-sectioninner">
    <a class="closebtnsec-quiz" href="/"><img src="https://cdn.shopify.com/s/files/1/0576/2167/6166/files/Frame_3532_1.png?v=1757492520" /></a>
    {% comment %} <a class="logosection" href="javascript:void(0)">
      <img class="logodesktop_sec" src="https://getinnergize.com/cdn/shop/files/Logo_1.png?v=1743773994&width=280" />
      <img class="logomobile_sec" src="https://cdn.shopify.com/s/files/1/0576/2167/6166/files/Logo_1_9daa13ae-401b-4d4d-8b41-cb9ec943413c.png?v=1757583583" />
    </a> {% endcomment %}
    <!-- Landing screen -->
    <div class="quiz-screen quiz-start page-width">
      <div class="contentsection-quiz">
        <h2>Lorem Ipsum Dolor?</h2>
        <p>Lorem Ipsum Dolor!</p>
        <div class="buttonsection-timer">
          <a href="#" id="startQuiz">Take Quiz</a>
          {% comment %} <span>
            <img src="https://cdn.shopify.com/s/files/1/0576/2167/6166/files/Vector_30_487c5f05-fb19-4d79-8935-d05e23a0f8fa.png?v=1756127360"/> 
            10 sec
          </span> {% endcomment %}
        </div>
      </div>
      <div class="quizimage-section">
        <img src="{{ section.settings.image | img_url : 'master' }}"/>
      </div>
    </div>

    <!-- Quiz screen -->
    <div class="quiz-screen quiz-questions">
      
       
      
      <h2 class="question-text"></h2>
      <div class="options"></div>

      <div class="progressbar-secbuttons" style="display:none">
     <div class="progress-wrapper">
        <div class="progress-bar">
            <div class="progress"></div>
        </div>
        <div class="progress-text"></div>
        </div>
      <div class="navigation-buttons">
        <button id="backBtn">Back</button>
        <button id="nextBtn">Next</button>
        </div>
    </div>
    </div>

    <!-- Result screen -->
    <div class="quiz-screen quiz-result" style="display:none;">
      
      <div class="finalscreen-quizsection">

        <img src="https://cdn.shopify.com/s/files/1/0732/4188/6977/files/jasmine.webp?v=1740461059">

        
        <div class="content-sectionfinal">
          <span class="signature_text">Your perfect match isâ€¦</span>
      <div id="product-name">Vibe Tribe</div>
          <p id="product-con">You love good energy, good people, and good times â€” and it shows. Vibe Tribe is all about fun connections, shared laughs, and being around people who just get you. Easy vibes. Real chemistry.</p>
          
 

      <div class="recipeaddtocart-section">
          <h2>Pairs well with</h2>

          <div class="recipeaddtocart-sectioninner"> 

              <div class="productsec">
                <img src="https://ejhyna30fjw6kqp5-69809471742.shopifypreview.com/cdn/shop/files/multi-for-women-50_8592eb04-ad69-49a8-8c23-604e17338e1f.png?v=1750333334&width=360">
                <h2>MULTIVITAMIN FOR MEN 50+</h2>
                <span>â‚¦ 13,500</span>
                <div class="shipping_txt">Free Shipping above  â‚¦ 20,000</div>
                <button class="addtocart_btn" data-id="47013263835390">Add To Cart</button>
              </div> 
              <div class="productsec">
                <img src="https://ejhyna30fjw6kqp5-69809471742.shopifypreview.com/cdn/shop/files/collagen.png?v=1762343939&width=360">
                <h2>COLLAGEN BEAUTY FORMULA</h2>
                <span>â‚¦ 15,000</span>
                <div class="shipping_txt">Free Shipping above  â‚¦ 20,000</div>
                <button class="addtocart_btn" data-id="47013264031998">Add To Cart</button>
              </div> 
              <div class="productsec">
                <img src="https://ejhyna30fjw6kqp5-69809471742.shopifypreview.com/cdn/shop/files/multi-for-men_d01dfa5c-d632-465f-9109-2017ebc55d2c.png?v=1734339026&width=360">
                <h2>MULTIVITAMIN FOR MEN</h2>
                <span>â‚¦ 13,500</span>
                <div class="shipping_txt">Free Shipping above  â‚¦ 20,000</div>
                <button class="addtocart_btn" data-id="47013262655742">Add To Cart</button>
              </div> 

          </div>
          
      </div>

          
      </div>

        </div>

    </div>

  </div>
</div>

  
<style>



.quizmain-section::before{
  content:"";
  position:absolute;
  top:20%;
  left:20px;
  width:90px;
  height:90px;
  background:url("https://cdn.shopify.com/s/files/1/0698/0947/1742/files/love.png?v=1769175068") no-repeat center/contain;
  pointer-events:none;
}

.quizmain-section::after{
  content:"";
  position:absolute;
  bottom:0%;
  right:25px;
  width:110px;
  height:110px;
  background:url("https://cdn.shopify.com/s/files/1/0698/0947/1742/files/hearts.png?v=1769175069") no-repeat center/contain;
  pointer-events:none;
}
</style>
       
    
<script>
$(document).ready(function () {

  /* ================= QUIZ DATA ================= */
  const quizData = [
    {
      question: "1. What's your ideal way to spend a romantic evening?",
      options: [
        { text: "a) Candlelit dinner at a fancy restaurant", value: 0 },
        { text: "b) Cooking together at home", value: 1 },
        { text: "c) Watching a movie under the stars", value: 2 },
        { text: "d) Dancing the night away", value: 2 }
      ]
    },
    {
      question: "2. What's your love language?",
      options: [
        { text: "a) Words of affirmation (sweet talks)", value: 0 },
        { text: "b) Quality time (spending time together)", value: 1 },
        { text: "c) Gifts (showing love with presents)", value: 2 },
        { text: "d) Acts of service (helping out)", value: 2 }
      ]
    },
    {
      question: "3. What's your idea of a perfect weekend?",
      options: [
        { text: "a) Exploring a new place", value: 0 },
        { text: "b) Relaxing at home", value: 1 },
        { text: "c) Trying out a new restaurant", value: 2 },
        { text: "d) Attending a party or event", value: 2 }
      ]
    },
    {
      question: "4. How important is family in your life?",
      options: [
        { text: "a) Very important", value: 0 },
        { text: "b) Somewhat important", value: 1 },
        { text: "c) Not very important", value: 2 },
        { text: "d) Not at all important", value: 2 }
      ]
    },
    {
      question: "5. What's your favorite way to show love?",
      options: [
        { text: "a) Surprising them with gifts", value: 0 },
        { text: "b) Cooking their favorite meal", value: 1 },
        { text: "c) Giving them space when needed", value: 2 },
        { text: "d) Being there to listen", value: 2 }
      ]
    },
    {
      question: "6. How do you handle conflicts?",
      options: [
        { text: "a) Talk it out immediately", value: 0 },
        { text: "b) Give each other space to cool off", value: 1 },
        { text: "c) Try to avoid conflicts", value: 2 },
        { text: "d) Seek advice from friends/family", value: 2 }
      ]
    },
    {
      question: "7. What's your style?",
      options: [
        { text: "a) Classic and traditional", value: 0 },
        { text: "b) Fun and spontaneous", value: 1 },
        { text: "c) Adventurous and bold", value: 2 },
        { text: "d) Laid-back and chill", value: 2 }
      ]
    },
    {
      question: "8 What's your favorite way to connect with someone?",
      options: [
        { text: "a) Deep conversations", value: 0 },
        { text: "b) Sharing laughs and jokes", value: 1 },
        { text: "c) Common interests", value: 2 },
        { text: "d) Supporting each other's goals", value: 2 }
      ]
    }
  ];

  let currentQ = 0;
  let answers = [];

  /* ================= RENDER QUESTION ================= */
  function renderQuestion() {
    const qData = quizData[currentQ];

    $(".question-text").text(qData.question);
    $(".options").empty();

    qData.options.forEach(opt => {
      const btn = $("<button>")
        .text(opt.text)
        .attr("data-value", opt.value);

      if (answers[currentQ] === opt.value) {
        btn.addClass("active");
      }

      $(".options").append(btn);
    });

    /* Progress bar + text */
    const totalQ = quizData.length;
    const percent = ((currentQ + 1) / totalQ) * 100;
    $(".progress").css("width", percent + "%");
    $(".progress-text").text(`${currentQ + 1} of ${totalQ}`);

    /* Back button */
    currentQ === 0 ? $("#backBtn").hide() : $("#backBtn").show();

    /* Next / Finish button */
    if (currentQ === totalQ - 1) {
      $("#nextBtn").text("Finish");
    } else {
      $("#nextBtn").text("Next");
    }
  }

  /* ================= START QUIZ ================= */
  $("#startQuiz").click(function (e) {
    e.preventDefault();
    $(".progressbar-secbuttons").show();
    $(".logosection").addClass("active");
    $(".quiz-start").hide();
    $(".quiz-questions").show();
    renderQuestion();
  });

  /* ================= OPTION CLICK ================= */
  $(document).on("click", ".options button", function () {
    const val = parseInt($(this).data("value"));
    $(this).addClass("active").siblings().removeClass("active");
    answers[currentQ] = val;
  });

  /* ================= NEXT / FINISH ================= */
  $("#nextBtn").click(function () {
    if (answers[currentQ] === undefined) {
      alert("Please select an option");
      return;
    }

    if (currentQ === quizData.length - 1) {
      $(".emailpopup-section").addClass("active");
    } else {
      currentQ++;
      renderQuestion();
    }
  });

  /* ================= BACK ================= */
  $("#backBtn").click(function () {
    if (currentQ > 0) {
      currentQ--;
      renderQuestion();
    }
  });

  /* ================= EMAIL VALIDATION ================= */
$("#getResults").click(function () {

  $(".errormsg").hide();

  const name = $("#quiz_name").val().trim();
  const phone = $("#quiz_phone").val().trim();
  const email = $("#quiz_email").val().trim();
  const age = $("#quiz_age").val().trim();
  const address = $("#quiz_address").val().trim();
  const social = $("#quiz_social").val().trim();

  const phoneRegex = /^[0-9]{10,15}$/;
  const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
  const urlRegex = /^(https?:\/\/)?([\w\-]+\.)+[a-z]{2,}\/?.*$/i;

  if (!name) {
    $(".name-error").show();
    return;
  }

  if (!phoneRegex.test(phone)) {
    $(".phone-error").show();
    return;
  }

  if (!emailRegex.test(email)) {
    $(".email-error").show();
    return;
  }

  if (!age || age < 10 || age > 100) {
    $(".age-error").show();
    return;
  }

  if (!address) {
    $(".address-error").show();
    return;
  }

  if (!urlRegex.test(social)) {
    $(".social-error").show();
    return;
  }

  sessionStorage.setItem("quizName", name);
  sessionStorage.setItem("quizPhone", phone);
  sessionStorage.setItem("quizEmail", email);
  sessionStorage.setItem("quizAge", age);
  sessionStorage.setItem("quizAddress", address);
  sessionStorage.setItem("quizSocial", social);

  $(".emailpopup-section").removeClass("active");
  showResult();
});


  $(".email-closebtn").click(function () {
    $(".emailpopup-section").removeClass("active");
  });

  /* ================= RESULT ================= */
  function showResult() {
    const total = answers.reduce((a, b) => a + b, 0);
    sessionStorage.setItem("quizScore", total);

    $(".quiz-questions").hide();
    $(".quiz-result").show();
    $(".score-output").text(total + " / " + (quizData.length * 2));
    $(".logosection").removeClass("active");

    let heading = "", paragraph = "", subheading = "", subpara = "", image = "";

    if (total <= 4) {
      heading = "Cool, Calm, and Collected!";
      paragraph = "You seem to manage stress well.";
      subheading = "Maximize your recovery";
      subpara = "InnerGize activates your vagus nerve.";
      image = "https://cdn.shopify.com/s/files/1/0576/2167/6166/files/Rectangle_1218_1.png";
    } else if (total <= 9) {
      heading = "A Bit Stressed, But Youâ€™ve Got This";
      paragraph = "Small lifestyle changes can help.";
      subheading = "Maximize your recovery";
      subpara = "InnerGize activates your vagus nerve.";
      image = "https://cdn.shopify.com/s/files/1/0576/2167/6166/files/Rectangle_1217.png";
    } else {
      heading = "Your Mind and Body Need a Pause";
      paragraph = "Stress may be affecting your daily life.";
      subheading = "Combat stress with InnerGize";
      subpara = "InnerGize activates your vagus nerve.";
      image = "https://cdn.shopify.com/s/files/1/0576/2167/6166/files/Rectangle_1217_1.png";
    }

    // $(".mainheading-quiz").text(heading);
    // $(".mainpara-quiz").text(paragraph);
    // $(".mainsubheading-quiz").text(subheading);
    // $(".mainsubpara-quiz").text(subpara);
    // $(".finalimg-quiz").attr("src", image);
  }

});



$(document).on("click", ".addtocart_btn", function (e) {
  e.preventDefault();
  e.stopPropagation();

  var $btn = $(this);
  var variantId = Number($btn.data("id"));

  if (!variantId) {
    console.error("Variant ID missing");
    return;
  }

  $btn.prop("disabled", true).addClass("loading");

  $.ajax({
    type: "POST",
    url: "/cart/add.js",
    data: {
      id: variantId,
      quantity: 1
    },
    dataType: "json",

    success: function (item) {

      /* âœ… Refresh cart data */
      $.getJSON("/cart.js", function (cart) {

        /* ðŸ”¥ Trigger Shopify cart update events */
        $(document).trigger("cart:refresh", cart);

        /* Optional: open drawer */
        if (window.upcartOpenCart) {
          window.upcartOpenCart();
        }
      });

    },

    error: function (err) {
      alert(err.responseJSON?.description || "Add to cart failed");
    },

    complete: function () {
      $btn.prop("disabled", false).removeClass("loading");
    }
  });
});






$("#getResults").on("click", function () {

  const name = $("#quiz_name").val().trim();
  const phone = $("#quiz_phone").val().trim();
  const email = $("#quiz_email").val().trim();
  const age = $("#quiz_age").val().trim();
  const address = $("#quiz_address").val().trim();
  const social = $("#quiz_social").val().trim();

  if (!name || !phone || !email || !age || !address || !social) {
    alert("Please fill all fields");
    return;
  }

  $("#quiz_result").val(sessionStorage.getItem("quizScore") || "N/A");

  $.ajax({
    type: "POST",
    url: "/contact",
    data: $("#quizContactForm").serialize(),
    success: function () {
      $(".form-success-msg").fadeIn();

      setTimeout(function () {
        $(".emailpopup-section").removeClass("active");
        $(".form-success-msg").hide();
        showResult();
      }, 1000);
    },
    error: function () {
      alert("Something went wrong. Try again.");
    }
  });
});


</script>


{% schema %}
{
  "name": "Quiz Main Section",
  "class": "section",
  "tag": "section",
  "disabled_on": {
    "groups": ["header", "footer"]
  },
  "settings": [
    {
      "type": "text",
      "id": "classadd",
      "label": "Class Add"
    },
    {
      "type": "richtext",
      "id": "heading",
      "label": "Heading"
    },
    {
      "type": "image_picker",
      "id": "image",
      "label": "Image"
    },
    {
      "type": "image_picker",
      "id": "mimage",
      "label": "Mobile Image"
    }
  ], 
  "presets": [
    {
      "name": " Quiz Main Section" 
    }
  ]
}
{% endschema %}

 